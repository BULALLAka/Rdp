name: LocalXpose RDP

on:
  workflow_dispatch:

jobs:
  runner:
    runs-on: ubuntu-latest
    timeout-minutes: 30

    steps:
    - name: Download LocalXpose
      run: |
        wget https://api.localxpose.io/api/downloads/loclx-linux-amd64.zip -O loclx.zip
        unzip loclx.zip
        chmod +x loclx

    - name: Login (Direct Token)
      run: |
        ./loclx account login BwCs3BfpLXSaN6gVbvO0JPkURiFobhGvTZGkKKT1

    - name: Verify Login
      run: |
        ./loclx account status

    - name: Install XRDP + Desktop
      run: |
        sudo apt update
        sudo apt install -y xrdp xfce4
        sudo systemctl restart xrdp

    - name: Start RDP Tunnel
      run: |
        echo "ðŸ”¥ TÃ¼nel aÃ§Ä±lÄ±yor..."
        ./loclx tunnel tcp --to 3389
